<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Templating Example</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.12/handlebars.min.js"></script>
  <link rel="stylesheet" href="../app/css/weather-icons.min.css">
  
</head>

<body>

<h2>Templating Output</h2>

<label>FORECAST LIST (formatted)</label><br/>
<div id="forecast"></div>

<script>
	let forecastjson = '{"cod": "200","message": 0.0054,"cnt": 40,"list": [{"dt": 1540501200,"main": {"temp": 283.81,"temp_min": 283.016,"temp_max": 283.81,"pressure": 1027.35,"sea_level": 1030.74,"grnd_level": 1027.35,"humidity": 86,"temp_kf": 0.8},"weather": [{"id": 800,"main": "Clear","description": "clear sky","icon": "01d"}],"clouds": {"all": 0},"wind": {"speed": 4.62,"deg": 311.502},"sys": {"pod": "d"},"dt_txt": "2018-10-25 21:00:00"},{"dt": 1540512000,"main": {"temp": 281.65,"temp_min": 281.05,"temp_max": 281.65,"pressure": 1028.98,"sea_level": 1032.37,"grnd_level": 1028.98,"humidity": 91,"temp_kf": 0.6},"weather": [{"id": 800,"main": "Clear","description": "clear sky","icon": "02n"}],"clouds": {"all": 8},"wind": {"speed": 4.37,"deg": 316.003},"sys": {"pod": "n"},"dt_txt": "2018-10-26 00:00:00"},{"dt": 1540522800,"main": {"temp": 279.86,"temp_min": 279.466,"temp_max": 279.86,"pressure": 1029.98,"sea_level": 1033.41,"grnd_level": 1029.98,"humidity": 98,"temp_kf": 0.4},"weather": [{"id": 801,"main": "Clouds","description": "few clouds","icon": "02n"}],"clouds": {"all": 12},"wind": {"speed": 3.62,"deg": 326.501},"sys": {"pod": "n"},"dt_txt": "2018-10-26 03:00:00"},{"dt": 1540533600,"main": {"temp": 278.14,"temp_min": 277.944,"temp_max": 278.14,"pressure": 1030.01,"sea_level": 1033.63,"grnd_level": 1030.01,"humidity": 100,"temp_kf": 0.2},"weather": [{"id": 801,"main": "Clouds","description": "few clouds","icon": "02n"}],"clouds": {"all": 12},"wind": {"speed": 3.06,"deg": 337.001},"sys": {"pod": "n"},"dt_txt": "2018-10-26 06:00:00"},{"dt": 1540544400,"main": {"temp": 276.733,"temp_min": 276.733,"temp_max": 276.733,"pressure": 1030.09,"sea_level": 1033.67,"grnd_level": 1030.09,"humidity": 100,"temp_kf": 0},"weather": [{"id": 802,"main": "Clouds","description": "scattered clouds","icon": "03n"}],"clouds": {"all": 36},"wind": {"speed": 1.91,"deg": 345.502},"sys": {"pod": "n"},"dt_txt": "2018-10-26 09:00:00"},{"dt": 1540555200,"main": {"temp": 276.618,"temp_min": 276.618,"temp_max": 276.618,"pressure": 1031.04,"sea_level": 1034.5,"grnd_level": 1031.04,"humidity": 100,"temp_kf": 0},"weather": [{"id": 802,"main": "Clouds","description": "scattered clouds","icon": "03d"}],"clouds": {"all": 36},"wind": {"speed": 1.21,"deg": 344.504},"sys": {"pod": "d"},"dt_txt": "2018-10-26 12:00:00"},{"dt": 1540566000,"main": {"temp": 280.247,"temp_min": 280.247,"temp_max": 280.247,"pressure": 1031.4,"sea_level": 1034.78,"grnd_level": 1031.4,"humidity": 100,"temp_kf": 0},"weather": [{"id": 801,"main": "Clouds","description": "few clouds","icon": "02d"}],"clouds": {"all": 20},"wind": {"speed": 1.36,"deg": 24.0005},"sys": {"pod": "d"},"dt_txt": "2018-10-26 15:00:00"},{"dt": 1540576800,"main": {"temp": 281.968,"temp_min": 281.968,"temp_max": 281.968,"pressure": 1030.49,"sea_level": 1033.89,"grnd_level": 1030.49,"humidity": 93,"temp_kf": 0},"weather": [{"id": 803,"main": "Clouds","description": "broken clouds","icon": "04d"}],"clouds": {"all": 68},"wind": {"speed": 1.36,"deg": 130},"sys": {"pod": "d"},"dt_txt": "2018-10-26 18:00:00"},{"dt": 1540587600,"main": {"temp": 282.076,"temp_min": 282.076,"temp_max": 282.076,"pressure": 1029.63,"sea_level": 1033.05,"grnd_level": 1029.63,"humidity": 92,"temp_kf": 0},"weather": [{"id": 803,"main": "Clouds","description": "broken clouds","icon": "04d"}],"clouds": {"all": 76},"wind": {"speed": 1.3,"deg": 136.004},"sys": {"pod": "d"},"dt_txt": "2018-10-26 21:00:00"},{"dt": 1540598400,"main": {"temp": 281.14,"temp_min": 281.14,"temp_max": 281.14,"pressure": 1029.81,"sea_level": 1033.28,"grnd_level": 1029.81,"humidity": 95,"temp_kf": 0},"weather": [{"id": 803,"main": "Clouds","description": "broken clouds","icon": "04n"}],"clouds": {"all": 76},"wind": {"speed": 3.31,"deg": 100},"sys": {"pod": "n"},"dt_txt": "2018-10-27 00:00:00"},{"dt": 1540609200,"main": {"temp": 281.885,"temp_min": 281.885,"temp_max": 281.885,"pressure": 1028.71,"sea_level": 1032.14,"grnd_level": 1028.71,"humidity": 93,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10n"}],"clouds": {"all": 92},"wind": {"speed": 4.36,"deg": 90.0007},"rain": {"3h": 0.01},"sys": {"pod": "n"},"dt_txt": "2018-10-27 03:00:00"},{"dt": 1540620000,"main": {"temp": 281.362,"temp_min": 281.362,"temp_max": 281.362,"pressure": 1026.83,"sea_level": 1030.26,"grnd_level": 1026.83,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10n"}],"clouds": {"all": 92},"wind": {"speed": 5.21,"deg": 81.0009},"rain": {"3h": 1.44},"sys": {"pod": "n"},"dt_txt": "2018-10-27 06:00:00"},{"dt": 1540630800,"main": {"temp": 282.405,"temp_min": 282.405,"temp_max": 282.405,"pressure": 1022.71,"sea_level": 1026.2,"grnd_level": 1022.71,"humidity": 100,"temp_kf": 0},"weather": [{"id": 501,"main": "Rain","description": "moderate rain","icon": "10n"}],"clouds": {"all": 92},"wind": {"speed": 7.26,"deg": 74.5028},"rain": {"3h": 4.265},"sys": {"pod": "n"},"dt_txt": "2018-10-27 09:00:00"},{"dt": 1540641600,"main": {"temp": 282.997,"temp_min": 282.997,"temp_max": 282.997,"pressure": 1019.19,"sea_level": 1022.64,"grnd_level": 1019.19,"humidity": 100,"temp_kf": 0},"weather": [{"id": 501,"main": "Rain","description": "moderate rain","icon": "10d"}],"clouds": {"all": 100},"wind": {"speed": 8.92,"deg": 68.5009},"rain": {"3h": 10.795},"sys": {"pod": "d"},"dt_txt": "2018-10-27 12:00:00"},{"dt": 1540652400,"main": {"temp": 284.59,"temp_min": 284.59,"temp_max": 284.59,"pressure": 1015.72,"sea_level": 1019.41,"grnd_level": 1015.72,"humidity": 100,"temp_kf": 0},"weather": [{"id": 501,"main": "Rain","description": "moderate rain","icon": "10d"}],"clouds": {"all": 100},"wind": {"speed": 10.06,"deg": 68.0027},"rain": {"3h": 6.18},"sys": {"pod": "d"},"dt_txt": "2018-10-27 15:00:00"},{"dt": 1540663200,"main": {"temp": 286.148,"temp_min": 286.148,"temp_max": 286.148,"pressure": 1012.09,"sea_level": 1015.56,"grnd_level": 1012.09,"humidity": 100,"temp_kf": 0},"weather": [{"id": 501,"main": "Rain","description": "moderate rain","icon": "10d"}],"clouds": {"all": 92},"wind": {"speed": 9.5,"deg": 65.0013},"rain": {"3h": 6.24},"sys": {"pod": "d"},"dt_txt": "2018-10-27 18:00:00"},{"dt": 1540674000,"main": {"temp": 286.638,"temp_min": 286.638,"temp_max": 286.638,"pressure": 1009.62,"sea_level": 1013.14,"grnd_level": 1009.62,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10d"}],"clouds": {"all": 88},"wind": {"speed": 8.45,"deg": 54.5038},"rain": {"3h": 1.03},"sys": {"pod": "d"},"dt_txt": "2018-10-27 21:00:00"},{"dt": 1540684800,"main": {"temp": 286.848,"temp_min": 286.848,"temp_max": 286.848,"pressure": 1010.07,"sea_level": 1013.48,"grnd_level": 1010.07,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10n"}],"clouds": {"all": 92},"wind": {"speed": 6.36,"deg": 52.5086},"rain": {"3h": 1.955},"sys": {"pod": "n"},"dt_txt": "2018-10-28 00:00:00"},{"dt": 1540695600,"main": {"temp": 287.273,"temp_min": 287.273,"temp_max": 287.273,"pressure": 1010.05,"sea_level": 1013.51,"grnd_level": 1010.05,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10n"}],"clouds": {"all": 92},"wind": {"speed": 4.22,"deg": 62.5023},"rain": {"3h": 1.645},"sys": {"pod": "n"},"dt_txt": "2018-10-28 03:00:00"},{"dt": 1540706400,"main": {"temp": 287.557,"temp_min": 287.557,"temp_max": 287.557,"pressure": 1010.14,"sea_level": 1013.66,"grnd_level": 1010.14,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10n"}],"clouds": {"all": 92},"wind": {"speed": 2.47,"deg": 153.502},"rain": {"3h": 0.68},"sys": {"pod": "n"},"dt_txt": "2018-10-28 06:00:00"},{"dt": 1540717200,"main": {"temp": 287.006,"temp_min": 287.006,"temp_max": 287.006,"pressure": 1011.33,"sea_level": 1014.92,"grnd_level": 1011.33,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10n"}],"clouds": {"all": 76},"wind": {"speed": 4.22,"deg": 218.011},"rain": {"3h": 0.22},"sys": {"pod": "n"},"dt_txt": "2018-10-28 09:00:00"},{"dt": 1540728000,"main": {"temp": 284.811,"temp_min": 284.811,"temp_max": 284.811,"pressure": 1014.09,"sea_level": 1017.43,"grnd_level": 1014.09,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10d"}],"clouds": {"all": 64},"wind": {"speed": 4.91,"deg": 225},"rain": {"3h": 0.024999999999999},"sys": {"pod": "d"},"dt_txt": "2018-10-28 12:00:00"},{"dt": 1540738800,"main": {"temp": 284.908,"temp_min": 284.908,"temp_max": 284.908,"pressure": 1015.61,"sea_level": 1019,"grnd_level": 1015.61,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10d"}],"clouds": {"all": 0},"wind": {"speed": 4.22,"deg": 232.501},"rain": {"3h": 0.0050000000000026},"sys": {"pod": "d"},"dt_txt": "2018-10-28 15:00:00"},{"dt": 1540749600,"main": {"temp": 285.661,"temp_min": 285.661,"temp_max": 285.661,"pressure": 1014.37,"sea_level": 1017.79,"grnd_level": 1014.37,"humidity": 100,"temp_kf": 0},"weather": [{"id": 800,"main": "Clear","description": "clear sky","icon": "02d"}],"clouds": {"all": 8},"wind": {"speed": 4.12,"deg": 237.5},"rain": {},"sys": {"pod": "d"},"dt_txt": "2018-10-28 18:00:00"},{"dt": 1540760400,"main": {"temp": 284.495,"temp_min": 284.495,"temp_max": 284.495,"pressure": 1015.38,"sea_level": 1018.72,"grnd_level": 1015.38,"humidity": 100,"temp_kf": 0},"weather": [{"id": 802,"main": "Clouds","description": "scattered clouds","icon": "03d"}],"clouds": {"all": 48},"wind": {"speed": 4.46,"deg": 238.501},"rain": {},"sys": {"pod": "d"},"dt_txt": "2018-10-28 21:00:00"},{"dt": 1540771200,"main": {"temp": 282.647,"temp_min": 282.647,"temp_max": 282.647,"pressure": 1017.52,"sea_level": 1020.9,"grnd_level": 1017.52,"humidity": 100,"temp_kf": 0},"weather": [{"id": 800,"main": "Clear","description": "clear sky","icon": "01n"}],"clouds": {"all": 0},"wind": {"speed": 5.11,"deg": 263.002},"rain": {},"sys": {"pod": "n"},"dt_txt": "2018-10-29 00:00:00"},{"dt": 1540782000,"main": {"temp": 281.207,"temp_min": 281.207,"temp_max": 281.207,"pressure": 1018.68,"sea_level": 1022.1,"grnd_level": 1018.68,"humidity": 100,"temp_kf": 0},"weather": [{"id": 800,"main": "Clear","description": "clear sky","icon": "01n"}],"clouds": {"all": 0},"wind": {"speed": 4.37,"deg": 267},"rain": {},"sys": {"pod": "n"},"dt_txt": "2018-10-29 03:00:00"},{"dt": 1540792800,"main": {"temp": 280.522,"temp_min": 280.522,"temp_max": 280.522,"pressure": 1018.84,"sea_level": 1022.27,"grnd_level": 1018.84,"humidity": 100,"temp_kf": 0},"weather": [{"id": 802,"main": "Clouds","description": "scattered clouds","icon": "03n"}],"clouds": {"all": 44},"wind": {"speed": 2.81,"deg": 245.001},"rain": {},"sys": {"pod": "n"},"dt_txt": "2018-10-29 06:00:00"},{"dt": 1540803600,"main": {"temp": 281.257,"temp_min": 281.257,"temp_max": 281.257,"pressure": 1017.64,"sea_level": 1021.08,"grnd_level": 1017.64,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10n"}],"clouds": {"all": 68},"wind": {"speed": 3.37,"deg": 222},"rain": {"3h": 0.009999999999998},"sys": {"pod": "n"},"dt_txt": "2018-10-29 09:00:00"},{"dt": 1540814400,"main": {"temp": 280.551,"temp_min": 280.551,"temp_max": 280.551,"pressure": 1017.35,"sea_level": 1020.83,"grnd_level": 1017.35,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10d"}],"clouds": {"all": 32},"wind": {"speed": 2.41,"deg": 225.001},"rain": {"3h": 0.020000000000003},"sys": {"pod": "d"},"dt_txt": "2018-10-29 12:00:00"},{"dt": 1540825200,"main": {"temp": 283.219,"temp_min": 283.219,"temp_max": 283.219,"pressure": 1016.54,"sea_level": 1020.05,"grnd_level": 1016.54,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10d"}],"clouds": {"all": 92},"wind": {"speed": 2.56,"deg": 202.003},"rain": {"3h": 0.48},"sys": {"pod": "d"},"dt_txt": "2018-10-29 15:00:00"},{"dt": 1540836000,"main": {"temp": 283.086,"temp_min": 283.086,"temp_max": 283.086,"pressure": 1014.95,"sea_level": 1018.4,"grnd_level": 1014.95,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10d"}],"clouds": {"all": 92},"wind": {"speed": 3.16,"deg": 237.503},"rain": {"3h": 2.41},"sys": {"pod": "d"},"dt_txt": "2018-10-29 18:00:00"},{"dt": 1540846800,"main": {"temp": 283.673,"temp_min": 283.673,"temp_max": 283.673,"pressure": 1015.01,"sea_level": 1018.43,"grnd_level": 1015.01,"humidity": 100,"temp_kf": 0},"weather": [{"id": 500,"main": "Rain","description": "light rain","icon": "10d"}],"clouds": {"all": 44},"wind": {"speed": 3.67,"deg": 256.5},"rain": {"3h": 0.040000000000006},"sys": {"pod": "d"},"dt_txt": "2018-10-29 21:00:00"},{"dt": 1540857600,"main": {"temp": 282.977,"temp_min": 282.977,"temp_max": 282.977,"pressure": 1016.82,"sea_level": 1020.26,"grnd_level": 1016.82,"humidity": 100,"temp_kf": 0},"weather": [{"id": 802,"main": "Clouds","description": "scattered clouds","icon": "03n"}],"clouds": {"all": 36},"wind": {"speed": 4.77,"deg": 265.003},"rain": {},"sys": {"pod": "n"},"dt_txt": "2018-10-30 00:00:00"},{"dt": 1540868400,"main": {"temp": 282.03,"temp_min": 282.03,"temp_max": 282.03,"pressure": 1018.66,"sea_level": 1022.08,"grnd_level": 1018.66,"humidity": 100,"temp_kf": 0},"weather": [{"id": 801,"main": "Clouds","description": "few clouds","icon": "02n"}],"clouds": {"all": 24},"wind": {"speed": 5.11,"deg": 279.004},"rain": {},"sys": {"pod": "n"},"dt_txt": "2018-10-30 03:00:00"},{"dt": 1540879200,"main": {"temp": 280.559,"temp_min": 280.559,"temp_max": 280.559,"pressure": 1019.9,"sea_level": 1023.45,"grnd_level": 1019.9,"humidity": 100,"temp_kf": 0},"weather": [{"id": 800,"main": "Clear","description": "clear sky","icon": "01n"}],"clouds": {"all": 0},"wind": {"speed": 5.31,"deg": 287.502},"rain": {},"sys": {"pod": "n"},"dt_txt": "2018-10-30 06:00:00"},{"dt": 1540890000,"main": {"temp": 279.587,"temp_min": 279.587,"temp_max": 279.587,"pressure": 1021.25,"sea_level": 1024.62,"grnd_level": 1021.25,"humidity": 100,"temp_kf": 0},"weather": [{"id": 801,"main": "Clouds","description": "few clouds","icon": "02n"}],"clouds": {"all": 12},"wind": {"speed": 4.51,"deg": 273.5},"rain": {},"sys": {"pod": "n"},"dt_txt": "2018-10-30 09:00:00"},{"dt": 1540900800,"main": {"temp": 279.669,"temp_min": 279.669,"temp_max": 279.669,"pressure": 1022.03,"sea_level": 1025.55,"grnd_level": 1022.03,"humidity": 100,"temp_kf": 0},"weather": [{"id": 800,"main": "Clear","description": "clear sky","icon": "01d"}],"clouds": {"all": 0},"wind": {"speed": 4.31,"deg": 263.003},"rain": {},"sys": {"pod": "d"},"dt_txt": "2018-10-30 12:00:00"},{"dt": 1540911600,"main": {"temp": 282.966,"temp_min": 282.966,"temp_max": 282.966,"pressure": 1022.65,"sea_level": 1026.01,"grnd_level": 1022.65,"humidity": 100,"temp_kf": 0},"weather": [{"id": 800,"main": "Clear","description": "clear sky","icon": "01d"}],"clouds": {"all": 0},"wind": {"speed": 4.41,"deg": 258.501},"rain": {},"sys": {"pod": "d"},"dt_txt": "2018-10-30 15:00:00"},{"dt": 1540922400,"main": {"temp": 285.098,"temp_min": 285.098,"temp_max": 285.098,"pressure": 1021.23,"sea_level": 1024.57,"grnd_level": 1021.23,"humidity": 82,"temp_kf": 0},"weather": [{"id": 800,"main": "Clear","description": "clear sky","icon": "01d"}],"clouds": {"all": 0},"wind": {"speed": 5.26,"deg": 268.003},"rain": {},"sys": {"pod": "d"},"dt_txt": "2018-10-30 18:00:00"}],"city": {"id": 420027130,"name": "New York","coord": {"lat": 40.6908,"lon": -74.019},"country": "US"}}';
	let forecast = JSON.parse(forecastjson);
		
	// https://www.keithcirkel.co.uk/es6-template-literals/
	function generate_forecast(forecast){
		return `<div class="forecast">
					<h4>${convert_date(forecast.dt)}</h4>
					<div class="weather-icon"><span class="wi wi-owm-${forecast.weather[0].id}"></span></div>
					<div class="weather-description">${forecast.weather[0].main}</div>
					<div class="weather-temp">
						<span class="temp-min">${temp_to_f(forecast.main.temp_min)}</span> / <span class="temp-max">${temp_to_f(forecast.main.temp_max)}</span>
					</div> 
					<div class="weather-pressure">Pressure:${forecast.main.pressure}</div>
					<div class="weather-humidity">Humidity:${forecast.main.humidity}</div>
				</div>`;
	}
	
	function temp_to_f(temp){
		return Math.round( ((temp-273.15)*1.8)+32 );
	}
	
	function temp_to_c(temp){
		return Math.round( temp-273.15 );
	}
	
	function convert_date(date){
		let a = new Date( date * 1000 );
			var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
			var days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];

		  var year = a.getFullYear();
		  var day = days[a.getDay()];
		  var month = months[a.getMonth()];
		  var date = a.getDate();
		  var hour = a.getHours();
		  var min = a.getMinutes();
		  var sec = a.getSeconds();
		  var time = day + ' ' + date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec ;
		  return time;
	}
	
	let newList = '';
	forecast.list.forEach(function(element) {
	    newList += generate_forecast(element);
	});
	
	document.getElementById("forecast").innerHTML = newList;

</script>
      
</body>
</html>